<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evolutivo de Gastos Totales</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #fff;
        }
        .container {
            padding: 20px;
        }
        #chart {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="chart"></div>
    </div>

    <script>
        
        var options = {
          series: [{
            name: "2024",
            data: [2196, 1815, 1859, 2284, 2044, 1300, 592, 388, 354, 394]
        },
            {
                name: '2023',
                data: [2229, 1814, 1744, 1574, 1625, 1616, 1604, 1731, 1538, 1767] 
            }
    ],
          chart: {
          height: 400,
          type: 'area',
          zoom: {
            enabled: false
          }
        },
            xaxis: {
                categories: ['ENE', 'FEB', 'MAR', 'ABR', 'MAY', 'JUN', 'JUL', 'AGO', 'SEP', 'OCT'],
                labels: {
                    show: false // Ocultar etiquetas del eje x
                },
                axisBorder: {
                    show: false // Eliminar la línea debajo del eje X
                },
                axisTicks: {
                    show: false
                }
              },
        dataLabels: { enabled: false },
        stroke: {
            curve: 'straight', // Cambia a 'smooth' para una transición más suave entre los puntos
            width: [3, 3],
            dashArray: [0, 5]
        },
        markers: {
            size: 0,
            colors: ['#0099ff', '#0099ff'], // Color de los puntos para la línea del año anterior
            strokeColors: '#fff',
            strokeWidth: 4,
            hover: {
                size: 8
            }
        },
        yaxis: {
            labels: { show: false },
            axisBorder: { show: false },
            axisTicks: { show: false }
        },
        grid: {
            show: true,
            borderColor: '#e0e0e0',
            strokeDashArray: 5,
            xaxis: {
                lines: {
                    show: true
                }
            },
            yaxis: {
                lines: {
                    show: false
                }
            }
        },
        legend: {
            show: false
        },
        tooltip: {
            theme: 'dark',
            y: {
                formatter: function (value, { seriesIndex, dataPointIndex }) {
                    let result = `${value}`; // Mostrar solo el valor por defecto
                    
                    // Mostrar el porcentaje solo para 2024 y 2025
                    if (seriesIndex === 1) { // Para 2024
                        const percentage = percentageDifferences[dataPointIndex]; // Obtener el porcentaje de 2024 vs 2023
                        result += ` (${percentage})`; // Agregar el porcentaje
                    }
    
                    return result;
                }
            }
        },
        fill: {
            type: 'gradient',
            gradient: {
                shadeIntensity: 1,
                opacityFrom: 0.8,
                opacityTo: 0.6,
                stops: [0, 90, 0]
            }
        },
        colors: ['#0099ff', '#0099ff'], // Colores para las líneas
        
        annotations: {
            points: [
                {
                    x: 'Jun',
                    y: 1304, // Asegúrate de que este valor esté en el rango del gráfico
                    marker: {
                        size: 0,
                        fillColor: '#D50000',
                        strokeColor: '#D50000',
                        shape: 'circle'
                    },
                    label: {
                        borderColor: '#D50000',
                        offsetY: -10,
                        style: {
                            color: '#fff',
                            background: '#D50000'
                        },
                        text: 'Norma 91'
                    }
                }
            ]
        }
        
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
      
    </script>
</body>
</html>
